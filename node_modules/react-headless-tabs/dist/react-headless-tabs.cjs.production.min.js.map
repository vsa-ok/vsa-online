{"version":3,"file":"react-headless-tabs.cjs.production.min.js","sources":["../src/index.tsx"],"sourcesContent":["import * as React from 'react';\n\nfunction usePrevious<T>(value: T) {\n  const ref = React.useRef<T>();\n\n  React.useEffect(() => {\n    ref.current = value;\n  });\n\n  return ref.current;\n}\n\nexport function useTabs<K extends string>(tabs: K[], defaultTab?: K | null) {\n  const state = React.useState<K | null>();\n  const [selectedTab, setSelectedTab] = state;\n\n  const activeIndex = React.useMemo(() => {\n    if (selectedTab) {\n      return tabs.indexOf(selectedTab);\n    }\n\n    return -1;\n  }, [selectedTab, tabs]);\n\n  const previousActiveIndex = usePrevious(activeIndex);\n\n  React.useEffect(() => {\n    if (tabs.length === 0) {\n      setSelectedTab(undefined);\n\n      return;\n    }\n\n    if (selectedTab === null || (selectedTab && tabs.includes(selectedTab))) {\n      return;\n    }\n\n    if (\n      typeof previousActiveIndex === 'number' &&\n      previousActiveIndex >= 0 &&\n      (tabs[previousActiveIndex] || tabs[previousActiveIndex - 1])\n    ) {\n      setSelectedTab(\n        tabs[previousActiveIndex] || tabs[previousActiveIndex - 1]\n      );\n\n      return;\n    }\n\n    if (defaultTab === null) {\n      return;\n    }\n\n    setSelectedTab(\n      defaultTab && tabs.includes(defaultTab) ? defaultTab : tabs[0]\n    );\n  }, [selectedTab, defaultTab, tabs]);\n\n  return state;\n}\n\nexport function TabPanel({\n  children,\n  render = 'lazy',\n  ...props\n}: React.HTMLAttributes<HTMLDivElement> & {\n  hidden: boolean;\n  render?: 'always' | 'lazy';\n}) {\n  const [shouldRender, setShouldRender] = React.useState(render === 'always');\n\n  React.useEffect(() => {\n    if (props.hidden) {\n      return;\n    }\n\n    setShouldRender(true);\n  }, [props.hidden]);\n\n  return <div {...props}>{shouldRender ? children : null}</div>;\n}\n"],"names":["children","render","props","React","shouldRender","setShouldRender","hidden","tabs","defaultTab","value","ref","state","selectedTab","setSelectedTab","activeIndex","indexOf","previousActiveIndex","current","length","includes","undefined"],"mappings":"oJA8DEA,IAAAA,aACAC,OAAAA,aAAS,SACNC,4IAKqCC,WAA0B,WAAXF,GAAhDG,OAAcC,cAErBF,aAAgB,WACVD,EAAMI,QAIVD,GAAgB,KACf,CAACH,EAAMI,SAEHH,uCAASD,GAAQE,EAAeJ,EAAW,gCAnEVO,EAAWC,OAV7BC,EAChBC,EAUAC,EAAQR,aACPS,EAA+BD,KAAlBE,EAAkBF,KAEhCG,EAAcX,WAAc,kBAC5BS,EACKL,EAAKQ,QAAQH,IAGd,IACP,CAACA,EAAaL,IAEXS,GAtBgBP,EAsBkBK,EArBlCJ,EAAMP,WAEZA,aAAgB,WACdO,EAAIO,QAAUR,KAGTC,EAAIO,gBAiBXd,aAAgB,WACM,IAAhBI,EAAKW,OAMW,OAAhBN,GAAyBA,GAAeL,EAAKY,SAASP,KAKzB,iBAAxBI,GACPA,GAAuB,IACtBT,EAAKS,IAAwBT,EAAKS,EAAsB,IAEzDH,EACEN,EAAKS,IAAwBT,EAAKS,EAAsB,IAMzC,OAAfR,GAIJK,EACEL,GAAcD,EAAKY,SAASX,GAAcA,EAAaD,EAAK,KA1B5DM,OAAeO,KA4BhB,CAACR,EAAaJ,EAAYD,IAEtBI"}