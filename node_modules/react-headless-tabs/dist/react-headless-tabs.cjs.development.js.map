{"version":3,"file":"react-headless-tabs.cjs.development.js","sources":["../src/index.tsx"],"sourcesContent":["import * as React from 'react';\n\nfunction usePrevious<T>(value: T) {\n  const ref = React.useRef<T>();\n\n  React.useEffect(() => {\n    ref.current = value;\n  });\n\n  return ref.current;\n}\n\nexport function useTabs<K extends string>(tabs: K[], defaultTab?: K | null) {\n  const state = React.useState<K | null>();\n  const [selectedTab, setSelectedTab] = state;\n\n  const activeIndex = React.useMemo(() => {\n    if (selectedTab) {\n      return tabs.indexOf(selectedTab);\n    }\n\n    return -1;\n  }, [selectedTab, tabs]);\n\n  const previousActiveIndex = usePrevious(activeIndex);\n\n  React.useEffect(() => {\n    if (tabs.length === 0) {\n      setSelectedTab(undefined);\n\n      return;\n    }\n\n    if (selectedTab === null || (selectedTab && tabs.includes(selectedTab))) {\n      return;\n    }\n\n    if (\n      typeof previousActiveIndex === 'number' &&\n      previousActiveIndex >= 0 &&\n      (tabs[previousActiveIndex] || tabs[previousActiveIndex - 1])\n    ) {\n      setSelectedTab(\n        tabs[previousActiveIndex] || tabs[previousActiveIndex - 1]\n      );\n\n      return;\n    }\n\n    if (defaultTab === null) {\n      return;\n    }\n\n    setSelectedTab(\n      defaultTab && tabs.includes(defaultTab) ? defaultTab : tabs[0]\n    );\n  }, [selectedTab, defaultTab, tabs]);\n\n  return state;\n}\n\nexport function TabPanel({\n  children,\n  render = 'lazy',\n  ...props\n}: React.HTMLAttributes<HTMLDivElement> & {\n  hidden: boolean;\n  render?: 'always' | 'lazy';\n}) {\n  const [shouldRender, setShouldRender] = React.useState(render === 'always');\n\n  React.useEffect(() => {\n    if (props.hidden) {\n      return;\n    }\n\n    setShouldRender(true);\n  }, [props.hidden]);\n\n  return <div {...props}>{shouldRender ? children : null}</div>;\n}\n"],"names":["usePrevious","value","ref","React","current","useTabs","tabs","defaultTab","state","selectedTab","setSelectedTab","activeIndex","indexOf","previousActiveIndex","length","undefined","includes","TabPanel","children","render","props","shouldRender","setShouldRender","hidden"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAEA,SAASA,WAAT,CAAwBC,KAAxB;AACE,MAAMC,GAAG,GAAGC,YAAA,EAAZ;AAEAA,EAAAA,eAAA,CAAgB;AACdD,IAAAA,GAAG,CAACE,OAAJ,GAAcH,KAAd;AACD,GAFD;AAIA,SAAOC,GAAG,CAACE,OAAX;AACD;;SAEeC,QAA0BC,MAAWC;AACnD,MAAMC,KAAK,GAAGL,cAAA,EAAd;AACA,MAAOM,WAAP,GAAsCD,KAAtC;AAAA,MAAoBE,cAApB,GAAsCF,KAAtC;AAEA,MAAMG,WAAW,GAAGR,aAAA,CAAc;AAChC,QAAIM,WAAJ,EAAiB;AACf,aAAOH,IAAI,CAACM,OAAL,CAAaH,WAAb,CAAP;AACD;;AAED,WAAO,CAAC,CAAR;AACD,GANmB,EAMjB,CAACA,WAAD,EAAcH,IAAd,CANiB,CAApB;AAQA,MAAMO,mBAAmB,GAAGb,WAAW,CAACW,WAAD,CAAvC;AAEAR,EAAAA,eAAA,CAAgB;AACd,QAAIG,IAAI,CAACQ,MAAL,KAAgB,CAApB,EAAuB;AACrBJ,MAAAA,cAAc,CAACK,SAAD,CAAd;AAEA;AACD;;AAED,QAAIN,WAAW,KAAK,IAAhB,IAAyBA,WAAW,IAAIH,IAAI,CAACU,QAAL,CAAcP,WAAd,CAA5C,EAAyE;AACvE;AACD;;AAED,QACE,OAAOI,mBAAP,KAA+B,QAA/B,IACAA,mBAAmB,IAAI,CADvB,KAECP,IAAI,CAACO,mBAAD,CAAJ,IAA6BP,IAAI,CAACO,mBAAmB,GAAG,CAAvB,CAFlC,CADF,EAIE;AACAH,MAAAA,cAAc,CACZJ,IAAI,CAACO,mBAAD,CAAJ,IAA6BP,IAAI,CAACO,mBAAmB,GAAG,CAAvB,CADrB,CAAd;AAIA;AACD;;AAED,QAAIN,UAAU,KAAK,IAAnB,EAAyB;AACvB;AACD;;AAEDG,IAAAA,cAAc,CACZH,UAAU,IAAID,IAAI,CAACU,QAAL,CAAcT,UAAd,CAAd,GAA0CA,UAA1C,GAAuDD,IAAI,CAAC,CAAD,CAD/C,CAAd;AAGD,GA9BD,EA8BG,CAACG,WAAD,EAAcF,UAAd,EAA0BD,IAA1B,CA9BH;AAgCA,SAAOE,KAAP;AACD;SAEeS;MACdC,gBAAAA;yBACAC;MAAAA,kCAAS;MACNC;;AAKH,wBAAwCjB,cAAA,CAAegB,MAAM,KAAK,QAA1B,CAAxC;AAAA,MAAOE,YAAP;AAAA,MAAqBC,eAArB;;AAEAnB,EAAAA,eAAA,CAAgB;AACd,QAAIiB,KAAK,CAACG,MAAV,EAAkB;AAChB;AACD;;AAEDD,IAAAA,eAAe,CAAC,IAAD,CAAf;AACD,GAND,EAMG,CAACF,KAAK,CAACG,MAAP,CANH;AAQA,SAAOpB,mBAAA,MAAA,oBAASiB,MAAT,EAAiBC,YAAY,GAAGH,QAAH,GAAc,IAA3C,CAAP;AACD;;;;;"}